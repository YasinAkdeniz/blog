{% extends 'base.twig' %}

{% block title %}{{ settings.title }}{% endblock %}
{% block description %}{{ settings.description }}{% endblock %}
{% block author %}{{ settings.author }}{% endblock %}
{% block keyword %}{{ settings.keyword }}{% endblock %}
{% block facebook %}{{ settings.facebook }}{% endblock %}
{% block twitter %}{{ settings.twitter }}{% endblock %}
{% block youtube %}{{ settings.youtube }}{% endblock %}
{% block linkedin %}{{ settings.linkedin }}{% endblock %}
{% block instagram %}{{ settings.instagram }}{% endblock %}







{% block content %}
    <!-- Blog Entries Column -->

    <div class="col-md-8 mt-5">
        <!-- Blog Post -->
        {% for blog in blogs %}
            <div class="card mb-4 ">
                <div class="card-body">
                    <img class="blog-preview" src="{{ asset('/assets/images/' ~ blog.image) }}">

                    <h2 class="card-title text-uppercase"><a class="text-decoration-none text-primary" href="/blog/{{ blog.id }}">{{ blog.title }}</a></h2>
                    <p class="card-text">{{ blog.body | raw }}</p>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="/blog/{{ blog.id }}" class="btn btn-primary">Devamını Oku&rarr;</a>
                    </div>
                </div>
                <div class="card-footer text-muted text-uppercase d-flex justify-content-between">
                    <span>Yazar: {{ blog.user.name }} {{ blog.user.lastname }}</span><span class="">Tarih: {{ blog.createdAt|date('Y-m-d') }}</span>
                </div>
            </div>
        {% endfor %}

         {% set page = 1 %}
         {% set rpp = 10 %}
         {% if url_items['page'] is defined %}
             {% set page = url_items['page'] %}
         {% endif %}
         {% if url_items['rpp'] is defined %}
             {% set rpp = url_items['rpp'] %}
         {% endif %}
         <nav aria-label="Page navigation example">

            <ul class="pagination justify-content-center">
                {% if page>1 %}
                    <li class='page-item'><a class='page-link' href="{{ paginationUrl(raw_url_items, page-1) }}">Önceki</a></li>
                {% endif %}
                {% set beforeIndex =  page - 4 %}
                {% set afterIndex =  page + 4 + 1 %}
                {% set totalPageCount = (total_blog_count / rpp) | round %}
                {%  for i in 1..afterIndex %}
                    {%  if(i>0 and i<=totalPageCount) %}
                        {% if i == page %}
                            <li class='page-item active'><a class='page-link' href='{{ paginationUrl(raw_url_items, i) }}'>{{ i }}</a></li>
                        {% else %}
                            <li class='page-item'><a class='page-link' href="{{ paginationUrl(raw_url_items, i) }}">{{ i }}</a></li>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {%if page != totalPageCount %}
                    <li class='page-item'><a class='page-link' href="{{ paginationUrl(raw_url_items, page+1) }}">Sonraki</a></li>
                {% endif %}
            </ul>
        </nav>
    </div>


{% endblock %}